import{a as nt,b as at,d as st}from"./chunk-YMRN6HY4.js";import{P as it,c as C,d as Q,e as $,f as _,g as M,h as q,i as R,ja as ot,k as tt,m as et,n as u,q as j,r as l,u as rt,v as d}from"./chunk-UUYY4NRX.js";import{f as ct,g as v,h as D,m as lt,n as b,p as ut,u as dt}from"./chunk-YADARBZD.js";import{$c as J,Bb as G,J as S,Nb as E,Oa as y,Qc as X,R as k,Sc as Y,Xc as w,Zc as Z,ca as U,eb as z,ed as K,f as T,fa as c,ga as h,gb as V,ib as H,ka as f,kb as I,la as a,mb as F,nb as N,pa as B,qa as g,r as A,ta as L,v as P,w as x,zb as W}from"./chunk-5I2UQFQR.js";var mt=(r,t)=>{let o=a(d),e=a(u);return o.authStatus()===l.authenticated?!0:(o.authStatus()===l.checking||e.navigateByUrl("/auth/login"),!1)};var pt=(r,t)=>{let o=a(d),e=a(u);return o.authStatus()===l.authenticated?(e.navigateByUrl("/dashboard"),!1):!0};var Dt=[{path:"auth",canActivate:[pt],loadChildren:()=>import("./chunk-QYVDEJ2Q.js").then(r=>r.LoginModule)},{path:"dashboard",canActivate:[mt],loadChildren:()=>import("./chunk-ZDT3ZBWC.js").then(r=>r.DashboardModule)},{path:"",redirectTo:"auth",pathMatch:"full"}],ht=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=g({type:t}),t.\u0275inj=h({imports:[j.forRoot(Dt),j]});let r=t;return r})();function bt(r,t){r&1&&E(0,"router-outlet")}var ft=(()=>{let t=class t{constructor(){this.title="archivador",this.authService2=a(d),this.router=a(u),this.finishedAuthCheck=X(()=>(this.authService2.authStatus()===l.checking,!0)),this.authStatusChangedEffect=Y(()=>{switch(console.log("first"),console.log(this.authService2.authStatus()),this.authService2.authStatus()){case l.checking:return;case l.authenticated:this.router.navigateByUrl("/dashboard");break;case l.notAuthenticated:this.router.navigateByUrl("/auth/login");break}})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=B({type:t,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(i,n){i&1&&(E(0,"app-loader-personalizado"),W(1,bt,1,0,"router-outlet",0)),i&2&&(z(),G("ngIf",n.finishedAuthCheck()))},dependencies:[K,et,at]});let r=t;return r})();var Ft="@",Et=(()=>{let t=class t{constructor(e,i,n,s,p){this.doc=e,this.delegate=i,this.zone=n,this.animationType=s,this.moduleImpl=p,this._rendererFactoryPromise=null,this.scheduler=a(H,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-RZRIN6SF.js").then(i=>i)).catch(i=>{throw new U(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:n})=>{this._engine=i(this.animationType,this.doc);let s=new n(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,i){let n=this.delegate.createRenderer(e,i);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let s=new O(n);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(p=>{let Rt=p.createRenderer(e,i);s.use(Rt),this.scheduler?.notify(9)}).catch(p=>{s.use(n)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(i){V()},t.\u0275prov=c({token:t,factory:t.\u0275fac});let r=t;return r})(),O=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let o of this.replay)o(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,o){return this.delegate.createElement(t,o)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,o){this.delegate.appendChild(t,o)}insertBefore(t,o,e,i){this.delegate.insertBefore(t,o,e,i)}removeChild(t,o,e){this.delegate.removeChild(t,o,e)}selectRootElement(t,o){return this.delegate.selectRootElement(t,o)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,o,e,i){this.delegate.setAttribute(t,o,e,i)}removeAttribute(t,o,e){this.delegate.removeAttribute(t,o,e)}addClass(t,o){this.delegate.addClass(t,o)}removeClass(t,o){this.delegate.removeClass(t,o)}setStyle(t,o,e,i){this.delegate.setStyle(t,o,e,i)}removeStyle(t,o,e){this.delegate.removeStyle(t,o,e)}setProperty(t,o,e){this.shouldReplay(o)&&this.replay.push(i=>i.setProperty(t,o,e)),this.delegate.setProperty(t,o,e)}setValue(t,o){this.delegate.setValue(t,o)}listen(t,o,e){return this.shouldReplay(o)&&this.replay.push(i=>i.listen(t,o,e)),this.delegate.listen(t,o,e)}shouldReplay(t){return this.replay!==null&&t.startsWith(Ft)}};function gt(r="animations"){return F("NgAsyncAnimations"),L([{provide:I,useFactory:(t,o,e)=>new Et(t,o,e,r),deps:[w,M,N]},{provide:y,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var jt=(()=>{let t=class t extends b{constructor(e,i,n){super(e,i,n)}ngOnDestroy(){this.flush()}};t.\u0275fac=function(i){return new(i||t)(f(w),f(v),f(D))},t.\u0275prov=c({token:t,factory:t.\u0275fac});let r=t;return r})();function Ot(){return new lt}function Tt(r,t,o){return new dt(r,t,o)}var vt=[{provide:D,useFactory:Ot},{provide:b,useClass:jt},{provide:I,useFactory:Tt,deps:[M,b,N]}],yt=[{provide:v,useFactory:()=>new ut},{provide:y,useValue:"BrowserAnimations"},...vt],Pt=[{provide:v,useClass:ct},{provide:y,useValue:"NoopAnimations"},...vt],At=(()=>{let t=class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Pt:yt}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=g({type:t}),t.\u0275inj=h({providers:yt,imports:[R]});let r=t;return r})();var St=T(rt());var It=(()=>{let t=class t{intercept(e,i){return i.handle(e).pipe(S(n=>(console.log("Interceptor capt\xF3 error:",n.status),n.status===401&&(console.log("Interceptor ejecutando logout por 401"),St.default.fire({title:"Sesi\xF3n expirada",text:"Tu sesi\xF3n ha expirado. Por favor, vuelve a iniciar sesi\xF3n.",icon:"warning",timer:3e3,showConfirmButton:!1,timerProgressBar:!0,allowOutsideClick:!1}),setTimeout(()=>{localStorage.clear(),window.location.reload()},3e3)),A(()=>n))))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=c({token:t,factory:t.\u0275fac});let r=t;return r})();var Nt=(()=>{let t=class t{constructor(e){this.loaderService=e}intercept(e,i){return this.loaderService.mostrar(),i.handle(e).pipe(k(()=>this.loaderService.ocultar()))}};t.\u0275fac=function(i){return new(i||t)(f(nt))},t.\u0275prov=c({token:t,factory:t.\u0275fac});let r=t;return r})();var wt=T(rt());var Ct=(()=>{let t=class t{constructor(){this.router=a(u),this.authService=a(d),this.EXCLUDED_URLS=["https://api.nublu.cloud/nublu/Api/Archivos"]}intercept(e,i){return this.isFileUpload(e)?i.handle(e):i.handle(e).pipe(x(1e4),S(n=>(n instanceof P&&(wt.default.fire("Sesi\xF3n expirada","La operaci\xF3n tard\xF3 demasiado tiempo","warning"),this.authService.logout2()),A(()=>n))))}isFileUpload(e){let i=this.EXCLUDED_URLS.some(p=>e.url.includes(p)),n=e.headers.get("Content-Type")?.includes("multipart/form-data"),s=e.body instanceof FormData;return i||n||s}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=c({token:t,factory:t.\u0275fac});let r=t;return r})();var Mt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=g({type:t,bootstrap:[ft]}),t.\u0275inj=h({providers:[tt(),gt(),Q($(),_()),{provide:Z,useClass:J},{provide:C,useClass:It,multi:!0},{provide:C,useClass:Nt,multi:!0},{provide:C,useClass:Ct,multi:!0}],imports:[R,ht,ot,it,At,st]});let r=t;return r})();q().bootstrapModule(Mt,{ngZoneEventCoalescing:!0}).catch(r=>console.error(r));
