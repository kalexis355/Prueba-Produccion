import{b as f,r as g,s as w,t as b}from"./chunk-UUYY4NRX.js";import{J as m,Qc as l,fa as n,la as p,n as u,r as d,sb as c,x as h}from"./chunk-5I2UQFQR.js";var y=(()=>{let e=class e{setPermissionsByRoles(t){let r={Administrador:["read","write","delete","share","rename","manage_permissions","upload","download","view_audit_logs","lock"],Encargado_oficina:["read","write","rename","upload","download","share"],Funcionario:["read","write","upload","download"],Contratista:["read","download"]},a=t.map(s=>r[s]||[]).flat();this.permissions=[...new Set(a)]}setSelectedRole(t){localStorage.setItem("role",t)}getSelectedRole(){return localStorage.getItem("role")}constructor(){this.userSubject=new u(null),this.user$=this.userSubject.asObservable(),this.permissions=[],this.baseUrl=w.baseUrl,this.baseUrl2=b.baseUrl,this.http=p(f),this._currentUSer2=c(null),this._authStatus=c(g.checking),this.currentUSer2=l(()=>this._currentUSer2()),this.authStatus=l(()=>this._authStatus())}rolAdministrador(){return!1}setAuthentication(t,r){return!0}obtenerFechaActualFormateada(){let t=new Date,r=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear();return`${r}/${a}/${s}`}login(t,r){let a=`${this.baseUrl2}/Api/Login`,s={Usuario:t,Contrase\u00F1a:r,FechaActual:this.obtenerFechaActualFormateada()};return this.http.post(a,s).pipe(h(({user:i,token:S})=>(this.setAuthentication(i,S),window.location.reload(),!0)),m(i=>d(()=>i.error.message)))}logout(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var k=(()=>{let e=class e{constructor(){this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.ccPattern="^[0-9]{6,10}$"}isValidField(t,r){return t.controls[r].errors&&t.controls[r].touched}passwordsMatchValidator(){return t=>{let r=t.get("contrasena")?.value,a=t.get("repetircontrase\xF1a")?.value;return r!==a?{passwordsMismatch:!0}:null}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();export{y as a,k as b};
